# 5.2. 機能仕様書: タスク管理

## 機能概要
ユーザーはプロジェクト内でタスクを作成し、そのステータス、担当者、期限などを管理できる。タスクの内容は編集・削除が可能。

---

### ユーザーストーリー
- ユーザーとして、プロジェクト内に新しいタスクを追加したい。なぜなら、やるべきことを明確にしたいからだ。
- ユーザーとして、タスクのステータスを「Todo」→「In Progress」→「Done」と変更したい。なぜなら、進捗状況をチームに共有したいからだ。
- ユーザーとして、タスクに担当者と期限を設定したい。なぜなら、責任と締め切りを明確にしたいからだ。

---

### 画面構成要素
- **カンバンボード形式**: 「Todo」「In Progress」「Done」の3つのカラムでタスクカードを表示する。
- **タスクカード**: タスクのタイトル、担当者のアイコン、期限を表示する。期限切れのタスクは赤色でハイライトする。
- **タスク作成ボタン**: 各カラムにタスクを新規追加するためのボタンを配置する。
- **タスク詳細モーダル**: タスクカードをクリックすると、タイトル、説明、担当者、期限、優先度、コメントを編集できるモーダルが表示される。

---

### 正常系フロー（タスク作成）
1.  ユーザーはカンバンボードの「Todo」カラムにある「＋」ボタンをクリックする。
2.  タスク作成用の入力フィールドが表示される。
3.  ユーザーは「タスクのタイトル」を入力し、Enterキーを押す。
4.  システムは新しいタスクを「Todo」状態でデータベースに保存する。
5.  カンバンボードに新しいタスクカードが即座に追加表示される。

### 正常系フロー（ステータス変更）
1.  ユーザーはカンバンボード上のタスクカードをドラッグする。
2.  ユーザーはタスクカードを別のカラム（例：「Todo」から「In Progress」）にドロップする。
3.  システムはタスクのステータスを更新し、データベースに保存する。
4.  画面上のタスクカードの位置が変更される。

### 異常系フロー
- **タイトル未入力**:
  - タイトルが空のままタスクを作成しようとした場合、作成は実行されず、入力フィールドは元の状態に戻る。
- **権限がない場合**:
  - 「閲覧のみ」権限のユーザーがタスクの作成、編集、削除、ステータス変更を試みた場合、操作は無効化されており、UI上も操作できないように表示する（ボタンの無効化など）。
- **サーバーエラー**:
  - データベースへの保存に失敗した場合、「タスクの更新に失敗しました」というトーストメッセージを表示し、UIを操作前の状態に戻す。
